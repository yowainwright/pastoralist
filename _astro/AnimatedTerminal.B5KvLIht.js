import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.WFquGv8Z.js";const j=30,_=!0,b=3e3,C=!0,O=0,R={threshold:.1},w="terminal-window max-w-3xl w-full my-4",U=(e,d,u)=>{const[i,l]=s.useState("");s.useEffect(()=>{if(!u){l("");return}const c=i.length;if(c<e.length){const m=setTimeout(()=>{l(e.slice(0,c+1))},d);return()=>clearTimeout(m)}},[u,i,e,d]);const o=i.length===e.length&&e.length>0;return{displayedText:i,isComplete:o}},P=(e,d,u)=>{const[i,l]=s.useState(!1);return s.useEffect(()=>{if(!e)return;const o=e.animate??C,c=e.delay??O;if(!o){const f=setTimeout(()=>{u()},c);return()=>clearTimeout(f)}const m=setTimeout(()=>{l(!0)},c);return()=>clearTimeout(m)},[e,u]),{isTyping:i,setIsTyping:l}},k=({demos:e,loop:d=_,typingSpeed:u=j,height:i,width:l})=>{const[o,c]=s.useState(0),[m,f]=s.useState(0),[h,I]=s.useState([]),[p,y]=s.useState(!1),L=s.useRef(null),T=e[o],a=T?.lines[m];s.useEffect(()=>{const n=new IntersectionObserver(D=>{D[0]?.isIntersecting&&!p&&y(!0)},R),r=L.current;return r&&n.observe(r),()=>{r&&n.unobserve(r)}},[p]);const E=s.useCallback(()=>{f(0),I([])},[]),S=s.useCallback(()=>{const n=o===e.length-1;n&&d?(c(0),E()):n||(c(o+1),E())},[o,e.length,d,E]),N=s.useCallback(()=>{const n=m===T.lines.length-1;if(a&&I(r=>[...r,a]),n){const r=T.pauseAfter??b;setTimeout(S,r)}else f(m+1)},[m,T,S,a]),{isTyping:x,setIsTyping:g}=P(p?a:void 0,h,N),{displayedText:A,isComplete:v}=U(a?.text??"",u,x);return s.useEffect(()=>{v&&x&&(g(!1),N())},[v,x,N,g]),t.jsxs("div",{ref:L,className:w,style:{...l?{width:l}:{}},children:[t.jsxs("div",{className:"terminal-header",children:[t.jsx("div",{className:"terminal-dot terminal-dot-red"}),t.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),t.jsx("div",{className:"terminal-dot terminal-dot-green"})]}),t.jsxs("div",{className:"terminal-content",style:{...i?{height:i}:{}},children:[h.map((n,r)=>t.jsxs("div",{className:`terminal-line ${n.className??""}`,children:[n.prefix&&t.jsx("span",{className:"terminal-prefix",children:n.prefix}),t.jsx("span",{dangerouslySetInnerHTML:{__html:n.text}})]},r)),x&&a&&t.jsxs("div",{className:`terminal-line ${a.className??""}`,children:[a.prefix&&t.jsx("span",{className:"terminal-prefix",children:a.prefix}),t.jsx("span",{dangerouslySetInnerHTML:{__html:A}}),t.jsx("span",{className:"cursor"})]})]})]})};export{k as AnimatedTerminal};
