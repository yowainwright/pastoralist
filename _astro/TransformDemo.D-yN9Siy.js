import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.Cd_vQiNd.js";const w=()=>{const[p,n]=t.useState("idle"),[j,c]=t.useState(""),[v,r]=t.useState(!1),[N,d]=t.useState(!1),[l,m]=t.useState(0),x=t.useRef(null),o=t.useRef(!1),h="pastoralist",i=['  "pastoralist": {','    "appendix": {','      "lodash@4.17.21": {','        "dependents": {','          "express": "^4.18.0"',"        },",'        "ledger": {','          "reason": "security",','          "cve": "CVE-2020-8203"',"        }","      }","    }","  }"];t.useEffect(()=>{const s=new IntersectionObserver(f=>{f[0]?.isIntersecting&&!o.current&&(o.current=!0,g())},{threshold:.3}),a=x.current;return a&&s.observe(a),()=>{a&&s.unobserve(a)}},[]);const g=()=>{n("typing"),c(""),r(!1),d(!1),m(0);let s=0;const a=setInterval(()=>{s<h.length?(c(h.slice(0,s+1)),s++):(clearInterval(a),setTimeout(()=>{n("checking"),r(!0),setTimeout(()=>{n("updating"),r(!1),u()},1500)},300))},80)},u=()=>{let s=0;const a=setInterval(()=>{s<i.length?(m(s+1),s++):(clearInterval(a),setTimeout(()=>{n("complete"),d(!0)},300))},120)};return e.jsxs("div",{ref:x,className:"grid md:grid-cols-2 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Execute the pastoralist cli"}),e.jsx("span",{className:"badge badge-primary badge-lg",children:"CLI"})]}),e.jsxs("div",{className:"terminal-window",children:[e.jsxs("div",{className:"terminal-header",children:[e.jsx("div",{className:"terminal-dot terminal-dot-red"}),e.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),e.jsx("div",{className:"terminal-dot terminal-dot-green"})]}),e.jsxs("div",{className:"terminal-content text-sm",style:{height:"auto",padding:"0.75rem 1rem"},children:[e.jsxs("div",{className:"terminal-line",children:[e.jsx("span",{className:"terminal-prefix",children:"$"}),e.jsx("span",{children:j}),p==="typing"&&e.jsx("span",{className:"cursor"})]}),v&&e.jsxs("div",{className:"terminal-line text-cyan-400",children:[e.jsx("span",{className:"inline-block animate-spin mr-2",children:"â ‹"}),"checking herd..."]}),N&&e.jsx("div",{className:"terminal-line text-success",children:"ðŸ‘©ðŸ½â€ðŸŒ¾ the herd is safe!"})]})]})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Documented overrides"}),e.jsx("span",{className:"badge badge-success badge-lg",children:"After"})]}),e.jsxs("div",{className:"terminal-window flex-1",style:{minHeight:"420px"},children:[e.jsxs("div",{className:"terminal-header",children:[e.jsx("div",{className:"terminal-dot terminal-dot-red"}),e.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),e.jsx("div",{className:"terminal-dot terminal-dot-green"}),e.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"package.json"})]}),e.jsxs("div",{className:"terminal-content text-sm",style:{height:"auto"},children:[e.jsx("div",{className:"terminal-line text-base-content/50",children:"{"}),e.jsxs("div",{className:"terminal-line",children:["  ",e.jsx("span",{className:"text-primary",children:'"overrides"'}),": ","{"]}),e.jsxs("div",{className:"terminal-line",children:["    ",e.jsx("span",{className:"text-primary",children:'"lodash"'}),":"," ",e.jsx("span",{className:"text-success",children:'"4.17.21"'})]}),e.jsxs("div",{className:"terminal-line",children:["  }",l>0?",":""]}),i.slice(0,l).map((s,a)=>e.jsx("div",{className:"terminal-line json-added",children:s.includes('"pastoralist"')||s.includes('"appendix"')||s.includes('"lodash@')||s.includes('"dependents"')||s.includes('"express"')||s.includes('"ledger"')||s.includes('"reason"')||s.includes('"cve"')?e.jsx("span",{dangerouslySetInnerHTML:{__html:s.replace(/"([^"]+)":/g,'<span class="text-primary">"$1"</span>:').replace(/: "([^"]+)"/g,': <span class="text-success">"$1"</span>')}}):s},a)),l<i.length&&Array.from({length:i.length-l}).map((s,a)=>e.jsx("div",{className:"terminal-line",children:"Â "},`placeholder-${a}`)),e.jsx("div",{className:"terminal-line text-base-content/50",children:"}"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Undocumented overrides"}),e.jsx("span",{className:"badge badge-lg text-white",style:{backgroundColor:"#ef4444",borderColor:"#ef4444"},children:"Before"})]}),e.jsxs("div",{className:"terminal-window",children:[e.jsxs("div",{className:"terminal-header",children:[e.jsx("div",{className:"terminal-dot terminal-dot-red"}),e.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),e.jsx("div",{className:"terminal-dot terminal-dot-green"}),e.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"package.json"})]}),e.jsxs("div",{className:"terminal-content text-sm",style:{height:"auto"},children:[e.jsx("div",{className:"terminal-line text-base-content/50",children:"{"}),e.jsxs("div",{className:"terminal-line",children:["  ",e.jsx("span",{className:"text-primary",children:'"overrides"'}),": ","{"]}),e.jsxs("div",{className:"terminal-line",children:["    ",e.jsx("span",{className:"text-primary",children:'"lodash"'}),":"," ",e.jsx("span",{className:"text-success",children:'"4.17.21"'})]}),e.jsx("div",{className:"terminal-line",children:"  }"}),e.jsx("div",{className:"terminal-line text-base-content/50",children:"}"}),e.jsx("div",{className:"terminal-line",children:"Â "}),e.jsx("div",{className:"terminal-line text-base-content/40 italic",children:"// Why is this here?"}),e.jsx("div",{className:"terminal-line text-base-content/40 italic",children:"// Who depends on it?"})]})]})]})]})};export{w as TransformDemo};
