import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.Cd_vQiNd.js";const P=()=>{const[h,n]=a.useState("idle"),[j,r]=a.useState(""),[I,m]=a.useState(""),[C,o]=a.useState(!1),[k,x]=a.useState(!1),[u,N]=a.useState(0),[L,c]=a.useState(1),v=a.useRef(null),g=a.useRef(!1),l=a.useRef(null),i=["// Why is this here?","// What depends on it? ðŸ¤”"].join(`
`),p="pastoralist",f=['  "pastoralist": {','    "appendix": {','      "lodash@4.17.21": {','        "dependents": {','          "express": "^4.18.0"',"        },",'        "ledger": {','          "reason": "security",','          "cve": "CVE-2020-8203"',"        }","      }","    }","  }"];a.useEffect(()=>{const s=new IntersectionObserver(R=>{R[0]?.isIntersecting&&!g.current&&(g.current=!0,b())},{threshold:.3}),t=v.current;return t&&s.observe(t),()=>{t&&s.unobserve(t)}},[]);const d=()=>{l.current&&(clearInterval(l.current),l.current=null)},y=()=>{d(),r(""),m(""),o(!1),x(!1),N(0)},b=()=>{y(),n("typing-tooltip"),c(1);let s=0;l.current=setInterval(()=>{s<i.length?(r(i.slice(0,s+1)),s++):(d(),setTimeout(()=>{S()},500))},40)},S=()=>{n("typing-command"),c(2);let s=0;l.current=setInterval(()=>{s<p.length?(m(p.slice(0,s+1)),s++):(d(),setTimeout(()=>{n("checking"),o(!0),setTimeout(()=>{o(!1),x(!0),setTimeout(()=>{n("updating"),c(3),w()},800)},1500)},300))},80)},w=()=>{let s=0;l.current=setInterval(()=>{s<f.length?(N(s+1),s++):(d(),n("complete"))},120)},A=s=>{y(),s===1?b():s===2?(r(i),S()):s===3&&(r(i),m(p),x(!0),n("updating"),c(3),w())},T=j.split(`
`),E=["Undocumented overrides","Execute pastoralist","Pastoralist manages the rest"];return e.jsxs("div",{ref:v,className:"flex flex-col gap-8",children:[e.jsx("ul",{className:"steps w-full",children:E.map((s,t)=>e.jsx("li",{className:`step cursor-pointer ${L>=t+1?"step-primary":""}`,onClick:()=>A(t+1),children:s},t))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Undocumented overrides"}),e.jsx("span",{className:"badge badge-lg text-white",style:{backgroundColor:"#ef4444",borderColor:"#ef4444"},children:"Before"})]}),e.jsxs("div",{className:"terminal-window",children:[e.jsxs("div",{className:"terminal-header",children:[e.jsx("div",{className:"terminal-dot terminal-dot-red"}),e.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),e.jsx("div",{className:"terminal-dot terminal-dot-green"}),e.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"package.json"})]}),e.jsxs("div",{className:"terminal-content text-sm",style:{height:"auto"},children:[e.jsx("div",{className:"terminal-line text-base-content/50",children:"{"}),e.jsxs("div",{className:"terminal-line",children:["  ",e.jsx("span",{className:"text-primary",children:'"overrides"'}),": ","{"]}),e.jsxs("div",{className:"terminal-line",children:["    ",e.jsx("span",{className:"text-primary",children:'"lodash"'}),":"," ",e.jsx("span",{className:"text-success",children:'"4.17.21"'})]}),e.jsx("div",{className:"terminal-line",children:"  }"}),e.jsx("div",{className:"terminal-line text-base-content/50",children:"}"}),e.jsx("div",{className:"terminal-line",children:"Â "}),T.map((s,t)=>e.jsxs("div",{className:"terminal-line text-base-content italic",children:[s,h==="typing-tooltip"&&t===T.length-1&&j.length<i.length&&e.jsx("span",{className:"cursor"})]},t))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Execute the pastoralist cli"}),e.jsx("span",{className:"badge badge-primary badge-lg",children:"CLI"})]}),e.jsxs("div",{className:"terminal-window",children:[e.jsxs("div",{className:"terminal-header",children:[e.jsx("div",{className:"terminal-dot terminal-dot-red"}),e.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),e.jsx("div",{className:"terminal-dot terminal-dot-green"})]}),e.jsxs("div",{className:"terminal-content text-sm",style:{height:"auto",padding:"0.75rem 1rem"},children:[e.jsxs("div",{className:"terminal-line",children:[e.jsx("span",{className:"terminal-prefix",children:"$"}),e.jsx("span",{children:I}),h==="typing-command"&&e.jsx("span",{className:"cursor"})]}),C&&e.jsxs("div",{className:"terminal-line text-cyan-400",children:[e.jsx("span",{className:"inline-block animate-spin mr-2",children:"â ‹"}),"checking herd..."]}),k&&e.jsx("div",{className:"terminal-line text-success",children:"ðŸ‘©ðŸ½â€ðŸŒ¾ the herd is safe!"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Documented overrides"}),e.jsx("span",{className:"badge badge-success badge-lg",children:"After"})]}),e.jsxs("div",{className:"terminal-window flex-1",style:{minHeight:"420px"},children:[e.jsxs("div",{className:"terminal-header",children:[e.jsx("div",{className:"terminal-dot terminal-dot-red"}),e.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),e.jsx("div",{className:"terminal-dot terminal-dot-green"}),e.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"package.json"})]}),e.jsxs("div",{className:"terminal-content text-sm",style:{height:"auto"},children:[e.jsx("div",{className:"terminal-line text-base-content/50",children:"{"}),e.jsxs("div",{className:"terminal-line",children:["  ",e.jsx("span",{className:"text-primary",children:'"overrides"'}),": ","{"]}),e.jsxs("div",{className:"terminal-line",children:["    ",e.jsx("span",{className:"text-primary",children:'"lodash"'}),":"," ",e.jsx("span",{className:"text-success",children:'"4.17.21"'})]}),e.jsxs("div",{className:"terminal-line",children:["  }",u>0?",":""]}),f.slice(0,u).map((s,t)=>e.jsx("div",{className:"terminal-line json-added",children:s.includes('"pastoralist"')||s.includes('"appendix"')||s.includes('"lodash@')||s.includes('"dependents"')||s.includes('"express"')||s.includes('"ledger"')||s.includes('"reason"')||s.includes('"cve"')?e.jsx("span",{dangerouslySetInnerHTML:{__html:s.replace(/"([^"]+)":/g,'<span class="text-primary">"$1"</span>:').replace(/: "([^"]+)"/g,': <span class="text-success">"$1"</span>')}}):s},t)),e.jsx("div",{className:"terminal-line text-base-content/50",children:"}"})]})]})]})]})]})};export{P as TransformDemo};
