---
import SIDEBAR from "../../constants/sidebar";
import { resolveUrl } from "../../utils/urlResolver";

const pathname = new URL(Astro.request.url).pathname;
---

<div class="drawer-side z-40 md:border-r md:border-base-content/10">
  <label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"
  ></label>
  <aside class="bg-base-100 min-h-screen w-72 sm:w-80">
    <div
      class="bg-base-100 sticky top-0 z-20 items-center gap-2 bg-opacity-90 px-4 py-2 backdrop-blur lg:flex font-outfit"
    >
      <a href={resolveUrl("")} class="btn btn-ghost px-2">
        <h1
          class="text-2xl font-bold gradient-text"
        >
          Pastoralist
        </h1>
      </a>
    </div>

    <div class="p-4 pt-8">
      {
        SIDEBAR.map((navItem) => (
          <div>
            <h2 class="mb-4 text-xl font-bold font-outfit">
              {navItem.title}
            </h2>
            <ul class="menu menu-sm p-0 space-y-1">
              {navItem.items.map((navItem) => (
                <li>
                  <a
                    href={navItem.href}
                    class={`hover:text-[#1D4ED8] hover:bg-[#1D4ED8]/10 transition ${pathname === navItem.href ? "text-[#1D4ED8] bg-[#1D4ED8]/10" : ""}`}
                  >
                    {navItem.title}
                    {navItem.label && (
                      <div class="badge badge-primary badge-sm">New</div>
                    )}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>
  </aside>
</div>
