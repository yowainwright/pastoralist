---
import SIDEBAR from "../../constants/sidebar";
import { resolveUrl } from "../../utils/urlResolver";

const pathname = new URL(Astro.request.url).pathname;
---

<div class="drawer-side z-40 md:border-r md:border-base-content/10">
  <label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"
  ></label>
  <aside class="bg-base-100 min-h-screen w-56 sm:w-60">
    <div
      class="bg-base-100 sticky top-0 z-20 items-center gap-2 bg-opacity-90 px-3 py-2 backdrop-blur lg:flex font-spline-sans-mono border-b border-base-content/10"
    >
      <a href={resolveUrl("")} class="flex items-center gap-2 px-2 py-1">
        <h1
          class="text-base font-bold gradient-text"
        >
          Pastoralist
        </h1>
      </a>
    </div>

    <div class="px-3 py-4 space-y-4">
      {
        SIDEBAR.map((navItem) => (
          <div>
            <h2 class="mb-2 px-2 text-xs font-semibold text-base-content/60 uppercase tracking-wider font-spline-sans-mono">
              {navItem.title}
            </h2>
            <ul class="space-y-0.5">
              {navItem.items.map((navItem) => (
                <li>
                  <a
                    href={navItem.href}
                    class={`block px-3 py-1.5 text-sm rounded-md transition-colors ${
                      pathname === navItem.href
                        ? "text-[#1D4ED8] bg-[#1D4ED8]/10 font-medium"
                        : "text-base-content/80 hover:text-[#1D4ED8] hover:bg-base-content/5"
                    }`}
                  >
                    <span class="flex items-center justify-between">
                      {navItem.title}
                      {navItem.label && (
                        <span class="ml-auto text-xs bg-[#1D4ED8]/20 text-[#1D4ED8] px-1.5 py-0.5 rounded">New</span>
                      )}
                    </span>
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>
  </aside>
</div>
