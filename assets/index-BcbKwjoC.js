import{r as t,a as e}from"./router-_wlnQ2Xi.js";import{u as J}from"./index-Cc5Vrczn.js";import{A as T,C as u,S as K,P,a as m,B as Q,b as W,c as Y}from"./AfterTerminal-DaIgEpDM.js";import"./react-vendor-C6WxKkic.js";import"./mermaid-GIUnprOp.js";import"./shiki-0bY7atrH.js";function ne({shouldAnimate:S=!0,onComplete:B}){const[j,r]=t.useState("idle"),[I,h]=t.useState(""),[z,b]=t.useState(!1),[M,x]=t.useState(!1),[k,w]=t.useState(0),[o,i]=t.useState(0),[V,N]=t.useState(!1),[c,E]=t.useState(!1),[C,A]=t.useState(!1),g=t.useRef(!1),d=t.useRef(null),v=t.useRef(null),a=t.useCallback(()=>{d.current&&(clearInterval(d.current),d.current=null)},[]),f=t.useCallback(s=>{let n=s;d.current=setInterval(()=>{n<T.length?(w(n+1),n++):(a(),r("complete"),A(!0),B?.(),setTimeout(()=>{N(!0)},150))},60)},[a]),L=t.useCallback(()=>{r("step2"),i(2);let s=0;d.current=setInterval(()=>{s<u.length?(h(u.slice(0,s+1)),s++):(a(),setTimeout(()=>{r("checking"),b(!0),setTimeout(()=>{b(!1),x(!0),setTimeout(()=>{r("step3"),i(3),f(0)},300)},500)},100))},20)},[a,f]),R=t.useCallback(()=>{a(),h(""),b(!1),x(!1),w(0),N(!1)},[a]),_=t.useCallback(()=>{R(),r("step1"),i(1),setTimeout(()=>{L()},800)},[R,L]),$=t.useCallback(()=>{if(!c||!v.current)return;E(!1);const{phase:s,typedCommand:n,appendixLines:l}=v.current;if(v.current=null,s==="step2"&&n.length<u.length){let p=n.length;d.current=setInterval(()=>{p<u.length?(h(u.slice(0,p+1)),p++):(a(),setTimeout(()=>{r("checking"),b(!0),setTimeout(()=>{b(!1),x(!0),setTimeout(()=>{r("step3"),i(3),f(0)},300)},500)},100))},20)}else s==="step3"&&l<T.length&&f(l)},[c,a,f]),{ref:F}=J({threshold:.3,onChange:s=>{s&&S&&(g.current?c&&$():(g.current=!0,_()))}});t.useEffect(()=>{!S&&!g.current&&(g.current=!0,r("complete"),h(u),w(T.length),i(3),A(!0),N(!0),x(!0))},[S]);const U=s=>{a(),v.current={phase:j,typedCommand:I,appendixLines:k},E(!0),A(!1),i(s),s===1?r("step1"):s===2?r("step2"):s===3&&r("step3")},y=c?o===1:o>=1||C,D=c?o===2:o>=2||C,O=c?o===3:o>=3||C;return e.jsxs("div",{ref:F,className:"flex flex-col gap-12",children:[e.jsx("ul",{className:"steps w-full",children:K.map((s,n)=>{const l=n+1,p=o>l||l===3&&j==="complete",X=o>=l,q="step cursor-pointer transition-all duration-200 text-base-content",G=X?"step-primary [&::before]:!bg-gradient-to-b [&::before]:!from-blue-400 [&::before]:!to-blue-500 [&::before]:shadow-md [&::before]:shadow-blue-500/25 [&::before]:!text-white [&::before]:!border [&::before]:!border-solid [&::before]:!border-[var(--step-bg)] [&::before]:!border-l-0 [&::before]:!border-r-0 [&::before]:!w-[calc(100%-29px)] [&::before]:!z-[999] [&::after]:!bg-blue-500":"[&::before]:text-base-content [&::before]:!border [&::before]:!border-solid [&::before]:!border-[var(--step-bg)] [&::before]:!border-l-0 [&::before]:!border-r-0 [&::before]:!w-[calc(100%-32px)] [&::before]:!z-[999]",H=p?"âœ“":l;return e.jsx("li",{className:`${q} ${G}`,onClick:()=>U(l),"data-content":H,children:s},n)})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative flex flex-col",children:[e.jsx(P,{stepNumber:1,title:m[0].title,description:m[0].description,visible:y}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Undocumented overrides"}),e.jsx("span",{className:"badge badge-lg text-white bg-gradient-to-b from-red-400 to-red-500 border-2 border-red-600 shadow-md shadow-red-500/25",children:"Before"})]}),e.jsx(Q,{isActive:y})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{stepNumber:2,title:m[1].title,description:m[1].description,visible:D}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Execute the pastoralist cli"}),e.jsx("span",{className:"badge badge-lg text-white bg-gradient-to-b from-blue-400 to-blue-500 border-2 border-blue-600 shadow-md shadow-blue-500/25",children:"CLI"})]}),e.jsx(W,{isActive:D,typedCommand:I,phase:j,showSpinner:z,showSuccess:M})]})]}),e.jsxs("div",{className:"relative flex flex-col",children:[e.jsx(P,{stepNumber:3,title:m[2].title,description:m[2].description,visible:O,showEmoji:V,verticalCenter:!0}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-base-content/60 text-sm",children:"Documented overrides"}),e.jsx("span",{className:"badge badge-lg text-white bg-gradient-to-b from-green-400 to-green-500 border-2 border-green-600 shadow-md shadow-green-500/25",children:"After"})]}),e.jsx(Y,{isActive:O,appendixLines:k})]})]})]})}export{ne as TransformDemo};
