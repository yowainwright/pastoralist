import{r as e,a as t}from"./router-BwWz57-B.js";import"./react-vendor-Cgg2GOmP.js";const C=30,F=!0,U=3e3,P=!0,M=0,V={threshold:.1},k="terminal-window max-w-3xl w-full my-4",H=(s,m,u)=>{const[r,l]=e.useState("");e.useEffect(()=>{if(!u){l("");return}const c=r.length;if(c<s.length){const o=setTimeout(()=>{l(s.slice(0,c+1))},m);return()=>clearTimeout(o)}},[u,r,s,m]);const d=r.length===s.length&&s.length>0;return{displayedText:r,isComplete:d}},Y=(s,m,u)=>{const[r,l]=e.useState(!1);return e.useEffect(()=>{if(!s)return;const d=s.animate??P,c=s.delay??M;if(!d){const f=setTimeout(()=>{u()},c);return()=>clearTimeout(f)}const o=setTimeout(()=>{l(!0)},c);return()=>clearTimeout(o)},[s,u]),{isTyping:r,setIsTyping:l}},q=({demos:s,loop:m=F,typingSpeed:u=C,height:r,width:l,startAnimation:d,onComplete:c})=>{const[o,f]=e.useState(0),[x,I]=e.useState(0),[S,L]=e.useState([]),[T,v]=e.useState(!1),[j,A]=e.useState(!1),y=e.useRef(null),p=s[o],a=p?.lines[x];e.useEffect(()=>{if(d!==void 0){d&&!T&&v(!0);return}const n=new IntersectionObserver(w=>{w[0]?.isIntersecting&&!T&&v(!0)},V),i=y.current;return i&&n.observe(i),()=>{i&&n.unobserve(i)}},[T,d]);const h=e.useCallback(()=>{I(0),L([])},[]),g=e.useCallback(()=>{const n=o===s.length-1;n&&m?(f(0),h()):n&&!m?(A(!0),c?.()):n||(f(o+1),h())},[o,s.length,m,h,c]),E=e.useCallback(()=>{const n=x===p.lines.length-1;if(a&&L(i=>[...i,a]),n){const i=p.pauseAfter??U;setTimeout(g,i)}else I(x+1)},[x,p,g,a]),{isTyping:N,setIsTyping:D}=Y(T&&!j?a:void 0,S,E),{displayedText:b,isComplete:_}=H(a?.text??"",u,N);e.useEffect(()=>{_&&N&&(D(!1),E())},[_,N,E,D]);const O=l?{width:l}:void 0,R=r?{height:r}:void 0;return t.jsxs("div",{ref:y,className:k,style:O,children:[t.jsxs("div",{className:"terminal-header",children:[t.jsx("div",{className:"terminal-dot terminal-dot-red"}),t.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),t.jsx("div",{className:"terminal-dot terminal-dot-green"}),t.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"terminal"})]}),t.jsxs("div",{className:"terminal-content",style:R,children:[S.map((n,i)=>t.jsxs("div",{className:`terminal-line ${n.className??""}`,children:[n.prefix&&t.jsx("span",{className:"terminal-prefix",children:n.prefix}),t.jsx("span",{dangerouslySetInnerHTML:{__html:n.text}})]},i)),N&&a&&t.jsxs("div",{className:`terminal-line ${a.className??""}`,children:[a.prefix&&t.jsx("span",{className:"terminal-prefix",children:a.prefix}),t.jsx("span",{dangerouslySetInnerHTML:{__html:b}}),t.jsx("span",{className:"cursor"})]})]})]})};export{q as AnimatedTerminal};
