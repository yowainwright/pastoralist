import{r as s,a as n}from"./router-_wlnQ2Xi.js";import"./react-vendor-C6WxKkic.js";const P=30,M=!0,V=3e3,k=!0,Y=0,$={threshold:.1},B="terminal-window max-w-3xl w-full my-4",G=(e,u,m)=>{const[a,l]=s.useState("");s.useEffect(()=>{if(!m){l("");return}const r=a.length;if(r<e.length){const o=setTimeout(()=>{l(e.slice(0,r+1))},u);return()=>clearTimeout(o)}},[m,a,e,u]);const f=a.length===e.length&&e.length>0;return{displayedText:a,isComplete:f}},H=(e,u,m)=>{const[a,l]=s.useState(!1);return s.useEffect(()=>{if(!e)return;const f=e.animate??k,r=e.delay??Y;if(!f){const x=setTimeout(()=>{m()},r);return()=>clearTimeout(x)}const o=setTimeout(()=>{l(!0)},r);return()=>clearTimeout(o)},[e,m]),{isTyping:a,setIsTyping:l}},K=({demos:e,loop:u=M,typingSpeed:m=P,height:a,width:l,startAnimation:f,shouldAnimate:r=!0,onComplete:o,hideHeader:x=!1})=>{const[d,v]=s.useState(0),[T,g]=s.useState(0),[h,I]=s.useState([]),[p,y]=s.useState(!r),[O,D]=s.useState(!r),_=s.useRef(null);s.useEffect(()=>{if(!r){const t=e.flatMap(i=>i.lines);I(t),D(!0),o?.()}},[r,e,o]);const E=e[d],c=E?.lines[T];s.useEffect(()=>{if(f!==void 0){f&&!p&&y(!0);return}const t=new IntersectionObserver(C=>{C[0]?.isIntersecting&&!p&&y(!0)},$),i=_.current;return i&&t.observe(i),()=>{i&&t.unobserve(i)}},[p,f]);const L=s.useCallback(()=>{g(0),I([])},[]),j=s.useCallback(()=>{const t=d===e.length-1;t&&u?(v(0),L()):t&&!u?(D(!0),o?.()):t||(v(d+1),L())},[d,e.length,u,L,o]),S=s.useCallback(()=>{const t=T===E.lines.length-1;if(c&&I(i=>[...i,c]),t){const i=E.pauseAfter??V;setTimeout(j,i)}else g(T+1)},[T,E,j,c]),{isTyping:N,setIsTyping:b}=H(p&&!O?c:void 0,h,S),{displayedText:R,isComplete:A}=G(c?.text??"",m,N);s.useEffect(()=>{A&&N&&(b(!1),S())},[A,N,S,b]);const w=l?{width:l}:void 0,F=a?{height:a}:void 0,U=x?"bg-transparent":B;return n.jsxs("div",{ref:_,className:U,style:w,children:[!x&&n.jsxs("div",{className:"terminal-header",children:[n.jsx("div",{className:"terminal-dot terminal-dot-red"}),n.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),n.jsx("div",{className:"terminal-dot terminal-dot-green"}),n.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"terminal"})]}),n.jsxs("div",{className:x?"p-4":"terminal-content",style:F,children:[h.map((t,i)=>n.jsxs("div",{className:`terminal-line ${t.className??""}`,children:[t.prefix&&n.jsx("span",{className:"terminal-prefix",children:t.prefix}),n.jsx("span",{dangerouslySetInnerHTML:{__html:t.text}})]},i)),N&&c&&n.jsxs("div",{className:`terminal-line ${c.className??""}`,children:[c.prefix&&n.jsx("span",{className:"terminal-prefix",children:c.prefix}),n.jsx("span",{dangerouslySetInnerHTML:{__html:R}}),n.jsx("span",{className:"cursor"})]})]})]})};export{K as AnimatedTerminal};
