import{r as e,a as t}from"./router-BvpRj3gN.js";import"./react-vendor-Cgg2GOmP.js";const R=30,w=!0,C=3e3,F=!0,U=0,P={threshold:.1},M="terminal-window max-w-3xl w-full my-4",V=(s,m,u)=>{const[r,l]=e.useState("");e.useEffect(()=>{if(!u){l("");return}const c=r.length;if(c<s.length){const o=setTimeout(()=>{l(s.slice(0,c+1))},m);return()=>clearTimeout(o)}},[u,r,s,m]);const d=r.length===s.length&&s.length>0;return{displayedText:r,isComplete:d}},k=(s,m,u)=>{const[r,l]=e.useState(!1);return e.useEffect(()=>{if(!s)return;const d=s.animate??F,c=s.delay??U;if(!d){const f=setTimeout(()=>{u()},c);return()=>clearTimeout(f)}const o=setTimeout(()=>{l(!0)},c);return()=>clearTimeout(o)},[s,u]),{isTyping:r,setIsTyping:l}},B=({demos:s,loop:m=w,typingSpeed:u=R,height:r,width:l,startAnimation:d,onComplete:c})=>{const[o,f]=e.useState(0),[x,I]=e.useState(0),[L,S]=e.useState([]),[T,g]=e.useState(!1),[j,A]=e.useState(!1),v=e.useRef(null),p=s[o],a=p?.lines[x];e.useEffect(()=>{if(d!==void 0){d&&!T&&g(!0);return}const n=new IntersectionObserver(O=>{O[0]?.isIntersecting&&!T&&g(!0)},P),i=v.current;return i&&n.observe(i),()=>{i&&n.unobserve(i)}},[T,d]);const h=e.useCallback(()=>{I(0),S([])},[]),y=e.useCallback(()=>{const n=o===s.length-1;n&&m?(f(0),h()):n&&!m?(A(!0),c?.()):n||(f(o+1),h())},[o,s.length,m,h,c]),E=e.useCallback(()=>{const n=x===p.lines.length-1;if(a&&S(i=>[...i,a]),n){const i=p.pauseAfter??C;setTimeout(y,i)}else I(x+1)},[x,p,y,a]),{isTyping:N,setIsTyping:D}=k(T&&!j?a:void 0,L,E),{displayedText:b,isComplete:_}=V(a?.text??"",u,N);return e.useEffect(()=>{_&&N&&(D(!1),E())},[_,N,E,D]),t.jsxs("div",{ref:v,className:M,style:{...l?{width:l}:{}},children:[t.jsxs("div",{className:"terminal-header",children:[t.jsx("div",{className:"terminal-dot terminal-dot-red"}),t.jsx("div",{className:"terminal-dot terminal-dot-yellow"}),t.jsx("div",{className:"terminal-dot terminal-dot-green"}),t.jsx("span",{className:"ml-3 text-slate-400 text-xs",children:"terminal"})]}),t.jsxs("div",{className:"terminal-content",style:{...r?{height:r}:{}},children:[L.map((n,i)=>t.jsxs("div",{className:`terminal-line ${n.className??""}`,children:[n.prefix&&t.jsx("span",{className:"terminal-prefix",children:n.prefix}),t.jsx("span",{dangerouslySetInnerHTML:{__html:n.text}})]},i)),N&&a&&t.jsxs("div",{className:`terminal-line ${a.className??""}`,children:[a.prefix&&t.jsx("span",{className:"terminal-prefix",children:a.prefix}),t.jsx("span",{dangerouslySetInnerHTML:{__html:b}}),t.jsx("span",{className:"cursor"})]})]})]})};export{B as AnimatedTerminal};
